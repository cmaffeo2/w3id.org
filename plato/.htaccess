Header set Access-Control-Allow-Origin *
Options +FollowSymLinks
RewriteEngine on

# Define repository paths for easy maintenance
Define GITHUB_REPO pelagios/place-attestation-ontology
Define GITHUB_PAGES pelagios.org/place-attestation-ontology

# --- Ontology content negotiation ---

# Turtle
RewriteCond %{HTTP_ACCEPT} text/turtle [OR]
RewriteCond %{HTTP_ACCEPT} application/x-turtle
RewriteRule ^$ https://raw.githubusercontent.com/${GITHUB_REPO}/main/ontology.ttl [R=303,L]

# --- HTML/XHTML: WIDOCO documentation ---
RewriteCond %{HTTP_ACCEPT} text/html [OR]
RewriteCond %{HTTP_ACCEPT} application/xhtml\+xml
RewriteRule ^$ https://${GITHUB_PAGES}/index-en.html [R=303,L]

# --- JSON Schemas ---
RewriteRule ^schemas/(.+)$ https://raw.githubusercontent.com/${GITHUB_REPO}/main/schemas/$1 [R=303,L]

# --- WebVOWL visualization ---
RewriteRule ^webvowl/?(.*)$ https://${GITHUB_PAGES}/webvowl/$1 [R=303,L]

# --- Default: browser gets WIDOCO docs ---
RewriteRule ^$ https://${GITHUB_PAGES}/index-en.html [R=303,L]
